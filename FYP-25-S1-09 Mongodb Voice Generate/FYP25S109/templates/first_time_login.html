{% extends "base.html" %}
{% block title %}Welcome page{% endblock %}

{% block content %}
<div class="container mt-5">
    <h1 class="text-center">Welcome to AI-NTERACTIVE</h1>
    <h2 class="text-center mb-5">To get started, choose your talking assistant</h2>
    
    <div class="row">
        {% for avatar in avatars %}
        <div class="col-sm-6 col-md-4 col-lg-3 mb-4">
            <div class="avatar-card text-center position-relative" style="height: 300px;">
                <!-- Avatar Image (always visible) -->
                <img
                    src="data:image/png;base64,{{ avatar.image_data }}"
                    alt="{{ avatar.avatarname }}"
                    class="avatar-showcase-img img-fluid position-absolute"
                    style="top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: 1;"
                />
                
                <!-- Avatar Video (shown on hover) -->
                {% if avatar.video_id %}
                <div class="avatar-video-container position-absolute w-100 h-100" 
                     style="top: 0; left: 0; z-index: 2; opacity: 0; transition: opacity 0.3s ease;">
                    <video class="avatar-showcase-video h-100 w-100" controls>
                        <source src="{{ url_for('boundary.serve_published_video', file_id=avatar.video_id) }}" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                </div>
                {% else %}
                <div class="position-absolute w-100 h-100 d-flex align-items-center justify-content-center"
                     style="top: 0; left: 0; z-index: 2; opacity: 0; transition: opacity 0.3s ease; background-color: rgba(0,0,0,0.7);">
                    <p class="text-white">No video available</p>
                </div>
                {% endif %}
                
                <!-- Avatar Name (always visible) -->
                <h5 class="mt-2 position-relative" style="z-index: 3; margin-top: 310px !important;">{{ avatar.avatarname }}</h5>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<style>
    .avatar-card:hover .avatar-video-container {
        opacity: 1 !important;
    }
    
    .avatar-card:hover .avatar-showcase-img {
        opacity: 0;
        transition: opacity 0.3s ease;
    }
</style>
{% endblock %}